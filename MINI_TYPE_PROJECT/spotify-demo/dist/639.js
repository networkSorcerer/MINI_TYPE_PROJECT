"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[639],{5639:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(1848),o=r(9067),a=r(6990),i=r(4073),s=r(6540),l=r(5647),c=r(4202),d=r(4745),p=r(8225),h=r(6718),x=r(3427),g=r(8363),u=r(1641),y=r(1385),m=r(9783),A=r(5800);var j=r(4848);const f=()=>(0,j.jsx)(a.A,{variant:"contained",color:"secondary",size:"large",onClick:()=>{(async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,t)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[t%62]),""),t=(r=await(async e=>{const t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const n=m.U,o=A._;console.log("리다이렉트 Uri",A._);const a=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),n&&o){const e={response_type:"code",client_id:n,scope:"user-read-private user-read-email",code_challenge_method:"S256",code_challenge:t,redirect_uri:o};a.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=a.toString()}})()},children:"Login"});var w=r(3930);const v=r(1083).A.create({baseURL:A.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});v.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const k=v,b=async()=>{try{return(await k.get("/me")).data}catch(e){throw new Error("fail to fetch user profile")}},C=(0,n.Ay)("div")({display:"flex",alignItems:"center",cursor:"pointer",borderRadius:"8px"}),_=(0,n.Ay)(x.A)({"& .MuiPaper-root":{color:"white",minWidth:"160px"}}),S=(0,n.Ay)(g.A)({"&:hover":{backgroundColor:"#444"}}),I=()=>{var e;const[t,r]=(0,s.useState)(null),{data:n}=(()=>{const e=localStorage.getItem("access_token");return(0,w.I)({queryKey:["current-user-profile"],queryFn:b,enabled:!!e})})();return(0,j.jsxs)(o.A,{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"64px",children:[n?(0,j.jsxs)(C,{children:[(0,j.jsx)(u.A,{onClick:e=>{r(e.currentTarget)},size:"small",children:(0,j.jsx)(y.A,{src:null===(e=n.images[0])||void 0===e?void 0:e.url,alt:n.display_name})}),(0,j.jsx)(_,{anchorEl:t,open:Boolean(t),onClose:()=>{r(null)},keepMounted:!0,children:(0,j.jsx)(S,{onClick:()=>{localStorage.removeItem("access_token"),window.location.reload()},children:"Log out"})})]}):(0,j.jsx)(f,{})," "]})},R=(0,n.Ay)("div")({display:"flex",height:"100vh",padding:"8px"}),U=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{width:"260px",height:"100%",display:"flex",flexDirection:"column",[t.breakpoints.down("sm")]:{display:"none"}}})),L=(0,n.Ay)(o.A)((e=>{let{theme:t}=e;return{borderRadius:"8px",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,width:"100%",padding:"8px",marginBottom:"8px",marginRight:"8px"}})),W=(0,n.Ay)(l.k2)((e=>{let{theme:t}=e;return{textDecoration:"none",display:"flex",alignItems:"center",gap:"20px",color:t.palette.text.secondary,"&:hover":{color:t.palette.text.primary},"&.active":{color:t.palette.text.primary}}})),z=(0,n.Ay)("ul")({listStyle:"none",padding:0,margin:0}),B=(0,n.Ay)(o.A)((e=>{let{theme:t}=e;return{borderRadius:"8px",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,width:"100%",height:"100%",padding:"8px",marginBottom:"8px",marginRight:"8px"}})),T=(0,n.Ay)(o.A)((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px"}})),q=(0,n.Ay)(o.A)((e=>{let{theme:t}=e;return{alignItems:"center",width:"90%",height:"130px",borderRadius:"8px",backgroundColor:"#1e1e1e",marginTop:"20px",padding:"10px"}})),E=(0,n.Ay)(a.A)({marginTop:"20px",fontWeight:"700"}),D=()=>{const e=(0,l.Zp)();return(0,j.jsxs)(R,{children:[(0,j.jsxs)(U,{children:[(0,j.jsx)(L,{children:(0,j.jsxs)(z,{children:[(0,j.jsxs)(W,{to:"/",children:[(0,j.jsx)(c.A,{}),(0,j.jsx)(i.A,{onClick:()=>e("/"),variant:"h2",fontWeight:700,children:"Home"})]}),(0,j.jsxs)(W,{to:"/search",children:[(0,j.jsx)(d.A,{}),(0,j.jsx)(i.A,{onClick:()=>e("/search"),variant:"h2",fontWeight:700,children:"Search"})]})]})}),(0,j.jsxs)(B,{children:[(0,j.jsxs)(T,{children:[(0,j.jsx)(p.A,{}),(0,j.jsx)(i.A,{varient:"h1",fontWeight:700,children:"Your Library"}),(0,j.jsx)(a.A,{children:(0,j.jsx)(h.A,{})})]}),(0,j.jsxs)(q,{children:[" ",(0,j.jsx)(i.A,{variant:"h2",fontWeight:700,children:"Create your first playlist"}),(0,j.jsx)(i.A,{variant:"body2",children:"It's easy, we'll help you"}),(0,j.jsx)(E,{variant:"contained",color:"secondary",children:"Create playlist"})]})]})]}),(0,j.jsxs)(L,{children:[(0,j.jsx)(I,{}),(0,j.jsx)(l.sv,{})]})]})}}}]);
//# sourceMappingURL=639.js.map?ver=11f04bf27ec3267f00e1