"use strict";(self.webpackChunkspotify_demo=self.webpackChunkspotify_demo||[]).push([[381],{9381:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_}),r(6540);var n=r(4073),a=r(3930),o=r(1083);const c="MISSING_ENV_VAR".SPOTIFY_BASE_URL,i="MISSING_ENV_VAR".REACT_APP_SPOTIFY_CLIENT_ID,s="MISSING_ENV_VAR".REACT_APP_SPOTIFY_SECRET_ID,l=async()=>{console.log("clientId:",s),console.log("clientSecret:",i);try{const t=new URLSearchParams({grant_type:"client_credentials"});return(await o.A.post("https://accounts.spotify.com/api/token",t,{headers:{Authorization:"Basic ".concat((e=s+":"+i,"undefined"!=typeof window?btoa(e):Buffer.from(e).toString("base64"))),"Content-Type":"application/x-www-form-urlencoded"}})).data}catch(e){throw new Error("Fail to fetch client credential token")}var e},d=()=>{const e=(()=>{const{data:e}=(0,a.I)({queryKey:["client-credential=token"],queryFn:l});return null==e?void 0:e.access_token})();return(0,a.I)({queryKey:["new-release"],queryFn:async()=>{if(!e)throw new Error("No token available");return(async e=>{try{return(await o.A.get("".concat(c,"/browse/new-release?limit=6"),{headers:{Authorization:"Bearer\n            ".concat(e)}})).data}catch(e){throw new Error("Fail to fetch ew release")}})(e)}})};var u=r(4848);const w=()=>{const{data:e,error:t,isLoading:r}=d();return(0,u.jsx)("div",{children:(0,u.jsx)(n.A,{variant:"h1",paddingTop:"8px",children:"New Released Albums"})})},_=()=>(0,u.jsx)("div",{children:(0,u.jsx)(w,{})})}}]);
//# sourceMappingURL=381.js.map?ver=4e4791287460de6d15f9